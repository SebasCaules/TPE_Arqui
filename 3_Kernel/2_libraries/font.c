#include <stdint.h>
#include "font.h"

uint8_t font_bitmap[NCHARS][HEIGHT_BITMAP] = {
    // ASCII 32: ' ' (space)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 33: '!'
    {0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
    0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00},

    // ASCII 34: '"'
    {0x00, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 35: '#'
    {0x00, 0x36, 0x36, 0x7F, 0x7F, 0x36, 0x7F, 0x7F,
    0x36, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 36: '$'
    {0x08,0x3E, 0x68, 0x68, 0x38, 0x0E, 0x0A, 0x0A,
    0x6A, 0x6A, 0x3E, 0x08, 0x08,  0x00,  0x00, 0x00},

    // ASCII 37: '%'
    {0x00, 0x63, 0x63, 0x06, 0x0C, 0x18, 0x30, 0x60,
    0x60, 0x63, 0x63, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 38: '&'
    {0x00, 0x3C, 0x66, 0x66, 0x3C, 0x78, 0x6C, 0x66,
    0x66, 0x66, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 39: '''
    {0x00, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 40: '('
    {0x00, 0x0C, 0x18, 0x30, 0x30, 0x30, 0x30, 0x30,
    0x30, 0x30, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 41: ')'
    {0x00, 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,
    0x0C, 0x0C, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00},

    // ASCII 42: '*'
    {0x00, 0x18, 0x7E, 0x3C, 0x66, 0x3C, 0x7E, 0x18,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 43: '+'
    {0x00, 0x18, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 44: ','
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x30, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00},

    // ASCII 45: '-'
    {0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 46: '.'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 47: '/'
    {0x00, 0x06, 0x0C, 0x18, 0x30, 0x30, 0x60, 0x60,
    0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 48: '0'
    {0x00, 0x3C, 0x66, 0x66, 0x6E, 0x76, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 49: '1'
    {0x00, 0x18, 0x38, 0x78, 0x18, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 50: '2'
    {0x00, 0x3C, 0x66, 0x66, 0x06, 0x0C, 0x18, 0x30,
     0x60, 0x60, 0x66, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 51: '3'
    {0x00, 0x7E, 0x66, 0x06, 0x06, 0x1C, 0x06, 0x06,
     0x06, 0x06, 0x66, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 52: '4'
    {0x00, 0x0C, 0x1C, 0x3C, 0x6C, 0x6C, 0xCC, 0xFE,
     0x0C, 0x0C, 0x0C, 0x0C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 53: '5'
    {0x00, 0x7E, 0x60, 0x60, 0x7C, 0x06, 0x06, 0x06,
     0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 54: '6'
    {0x00, 0x3C, 0x66, 0x66, 0x60, 0x7C, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 55: '7'
    {0x00, 0x7E, 0x66, 0x06, 0x0C, 0x18, 0x18, 0x30,
     0x30, 0x30, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00},

    // ASCII 56: '8'
    {0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 57: '9'
    {0x00, 0x3C, 0x66, 0x66, 0x66, 0x3E, 0x06, 0x06,
     0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 58: ':'
    {0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00,
     0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 59: ';'
    {0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00,
     0x00, 0x18, 0x18, 0x30, 0x30, 0x00, 0x00, 0x00},

    // ASCII 60: '<'
    {0x00, 0x00, 0x06, 0x0C, 0x18, 0x30, 0x30, 0x30,
     0x30, 0x18, 0x0C, 0x06, 0x00, 0x00, 0x00, 0x00},

    // ASCII 61: '='
    {0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00,
     0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 62: '>'
    {0x00, 0x00, 0x60, 0x30, 0x18, 0x0C, 0x0C, 0x0C,
     0x0C, 0x18, 0x30, 0x60, 0x00, 0x00, 0x00, 0x00},

    // ASCII 63: '?'
    {0x00, 0x3C, 0x66, 0x66, 0x06, 0x0C, 0x18, 0x18,
     0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00},
     // ASCII 64: '@'
    {0x00, 0x3C, 0x42, 0x5A, 0x5A, 0x5A, 0x5A, 0x5C,
     0x40, 0x40, 0x42, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 65: 'A'
    {0x00, 0x18, 0x24, 0x42, 0x42, 0x42, 0x7E, 0x42,
     0x42, 0x42, 0x42, 0x42, 0x00, 0x00, 0x00, 0x00},

    // ASCII 66: 'B'
    {0x00, 0x7C, 0x66, 0x66, 0x66, 0x7C, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x7C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 67: 'C'
    {0x00, 0x3C, 0x66, 0x66, 0x60, 0x60, 0x60, 0x60,
     0x60, 0x60, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 68: 'D'
    {0x00, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x7C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 69: 'E'
    {0x00, 0x7E, 0x60, 0x60, 0x60, 0x7C, 0x60, 0x60,
     0x60, 0x60, 0x60, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 70: 'F'
    {0x00, 0x7E, 0x60, 0x60, 0x60, 0x7C, 0x60, 0x60,
     0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00},

    // ASCII 71: 'G'
    {0x00, 0x3C, 0x66, 0x60, 0x60, 0x60, 0x6E, 0x66,
     0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 72: 'H'
    {0x00, 0x66, 0x66, 0x66, 0x66, 0x7E, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 73: 'I'
    {0x00, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 74: 'J'
    {0x00, 0x7E, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06,
     0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 75: 'K'
    {0x00, 0x66, 0x66, 0x6C, 0x6C, 0x78, 0x78, 0x78,
     0x6C, 0x6C, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 76: 'L'
    {0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
     0x60, 0x60, 0x60, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 77: 'M'
    {0x00, 0x66, 0x66, 0x7E, 0x7E, 0x7E, 0x7E, 0x66,
     0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 78: 'N'
    {0x00, 0x66, 0x66, 0x76, 0x7E, 0x7E, 0x6E, 0x6E,
     0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 79: 'O'
    {0x00, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 80: 'P'
    {0x00, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x60,
     0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00},

    // ASCII 81: 'Q'
    {0x00, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x76, 0x3E, 0x00, 0x06, 0x06, 0x00},

    // ASCII 82: 'R'
    {0x00, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x6C,
     0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 83: 'S'
    {0x00, 0x3E, 0x60, 0x60, 0x60, 0x3C, 0x06, 0x06,
     0x06, 0x06, 0x06, 0x7C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 84: 'T'
    {0x00, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00},

    // ASCII 85: 'U'
    {0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 86: 'V'
    {0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3C, 0x18, 0x00, 0x00, 0x00, 0x00},

    // ASCII 87: 'W'
    {0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x7E, 0x7E,
     0x7E, 0x7E, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 88: 'X'
    {0x00, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x3C,
     0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00},

    // ASCII 89: 'Y'
    {0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x18,
     0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00},

    // ASCII 90: 'Z'
    {0x00, 0x7E, 0x06, 0x06, 0x06, 0x0C, 0x18, 0x30,
     0x60, 0x60, 0x60, 0x7E, 0x00, 0x00, 0x00, 0x00},
     
     // ASCII 91: '['
    {0x00, 0x3E, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
     0x30, 0x30, 0x30, 0x3E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 92: '\'
    {0x00, 0x60, 0x60, 0x30, 0x30, 0x30, 0x18, 0x18,
     0x18, 0x0C, 0x0C, 0x06, 0x06, 0x00, 0x00, 0x00},

    // ASCII 93: ']'
    {0x00, 0x3E, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06,
     0x06, 0x06, 0x06, 0x3E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 94: '^'
    {0x00, 0x18, 0x3C, 0x66, 0x66, 0x00, 0x00, 0x00,
     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 95: '_'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
     0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00},

     // ASCII 96: '`'
    {0x00, 0x30, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00,
     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 97: 'a'
    {0x00, 0x00, 0x00, 0x00, 0x3C, 0x06, 0x3E, 0x66,
     0x66, 0x66, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 98: 'b'
    {0x00, 0x60, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 99: 'c'
    {0x00, 0x00, 0x00, 0x00, 0x3C, 0x66, 0x60, 0x60,
     0x60, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 100: 'd'
    {0x00, 0x06, 0x06, 0x06, 0x3E, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 101: 'e'
    {0x00, 0x00, 0x00, 0x00, 0x3C, 0x66, 0x7E, 0x60,
     0x60, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 102: 'f'
    {0x00, 0x0E, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 103: 'g'
    {0x00, 0x00, 0x00, 0x00, 0x3E, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3E, 0x06, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 104: 'h'
    {0x00, 0x60, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 105: 'i'
    {0x00, 0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 106: 'j'
    {0x00, 0x06, 0x00, 0x06, 0x06, 0x06, 0x06, 0x06,
     0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 107: 'k'
    {0x00, 0x60, 0x60, 0x60, 0x66, 0x6C, 0x78, 0x78,
     0x6C, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 108: 'l'
    {0x00, 0x60, 0x70, 0x30, 0x30, 0x30, 0x30, 0x30,
    0x30, 0x18, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 109: 'm'
    {0x00, 0x00, 0x00, 0x00, 0x7E, 0x7E, 0x7E, 0x7E,
     0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 110: 'n'
    {0x00, 0x00, 0x00, 0x00, 0x7C, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 111: 'o'
    {0x00, 0x00, 0x00, 0x00, 0x3C, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00},

     // ASCII 112: 'p'
    {0x00, 0x00, 0x00, 0x00, 0x7C, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x7C, 0x60, 0x60, 0x60, 0x00, 0x00},

    // ASCII 113: 'q'
    {0x00, 0x00, 0x00, 0x00, 0x3E, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3E, 0x06, 0x06, 0x06, 0x00, 0x00},

    // ASCII 114: 'r'
    {0x00, 0x00, 0x00, 0x00, 0x6E, 0x38, 0x30, 0x30,
     0x30, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 115: 's'
    {0x00, 0x00, 0x00, 0x00, 0x3E, 0x60, 0x60, 0x3C,
     0x06, 0x06, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 116: 't'
    {0x00, 0x18, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 117: 'u'
    {0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 118: 'v'
    {0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3C, 0x18, 0x00, 0x00, 0x00, 0x00},

    // ASCII 119: 'w'
    {0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x7E,
     0x7E, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 120: 'x'
    {0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x3C, 0x18,
     0x3C, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 121: 'y'
    {0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66,
     0x66, 0x66, 0x3E, 0x06, 0x7C, 0x00, 0x00, 0x00},

    // ASCII 122: 'z'
    {0x00, 0x00, 0x00, 0x00, 0x7E, 0x06, 0x0C, 0x18,
     0x30, 0x60, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 123: '{'
    {0x00, 0x0C, 0x18, 0x18, 0x18, 0x30, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00},

    // ASCII 124: '|'
    {0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00},

    // ASCII 125: '}'
    {0x00, 0x30, 0x18, 0x18, 0x18, 0x0C, 0x18, 0x18,
     0x18, 0x18, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00},

    // ASCII 126: '~'
    {0x00, 0x00, 0x00, 0x00, 0x32, 0x4C, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}

};

// void drawChar(unsigned char c, int x, int y, int fgcolor, int bgcolor) {
// 	int cx,cy;
// 	int mask[8]={128,64,32,16,8,4,2,1};
// 	unsigned char *glyph=font_bitmap[c - 32];

//     for(cy=0;cy<16;cy++){
//         for(cx=0;cx<8;cx++){
//             putPixel(glyph[cy]&mask[cx]?fgcolor:bgcolor,x+cx,y+cy-12);
//         }
//     }
// }

void drawChar(unsigned char c, int x, int y, int fgcolor, int bgcolor, int scale) {
    int cx, cy, dx, dy;
    unsigned char *glyph = font_bitmap[c - 32];

    // Loop through each row of the glyph (16 rows)
    for (cy = 0; cy < CHAR_HEIGHT; cy++) {
        // Loop through each column of the glyph (8 columns)
        for (cx = 0; cx < CHAR_WIDTH; cx++) {
            // Check if the pixel at (cx, cy) in the glyph is part of the character
            if (glyph[cy] & (1 << (7 - cx))) {
                // Draw the scaled pixel
                for (dy = 0; dy < scale; dy++) {
                    for (dx = 0; dx < scale; dx++) {
                        putPixel(fgcolor, x + cx * scale + dx, y + (cy * scale) + dy); // Corrected vertical position
                    }
                }
            } else {
                // Draw the background for the scaled pixel
                for (dy = 0; dy < scale; dy++) {
                    for (dx = 0; dx < scale; dx++) {
                        putPixel(bgcolor, x + cx * scale + dx, y + (cy * scale) + dy); // Corrected vertical position
                    }
                }
            }
        }
    }
}
