#include <stdint.h>
#include <font.h>
#include <videoDriver.h>

uint8_t font_bitmap[NCHARS][HEIGHT_BITMAP] = {
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII ' '
    {0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00}, // ASCII '!'
    {0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '"'
    {0x00, 0x00, 0x00, 0x36, 0x36, 0x7F, 0x36, 0x36, 0x36, 0x7F, 0x36, 0x36, 0x00, 0x00, 0x00, 0x00}, // ASCII '#'
    {0x00, 0x00, 0x08, 0x08, 0x3E, 0x6B, 0x68, 0x60, 0x3E, 0x03, 0x0B, 0x6B, 0x3E, 0x08, 0x08, 0x00}, // ASCII '$'
    {0x00, 0x00, 0x30, 0x79, 0x33, 0x06, 0x0C, 0x18, 0x30, 0x66, 0x4F, 0x06, 0x00, 0x00, 0x00, 0x00}, // ASCII '%'
    {0x00, 0x00, 0x1C, 0x36, 0x36, 0x1C, 0x38, 0x6B, 0x66, 0x66, 0x66, 0x3B, 0x00, 0x00, 0x00, 0x00}, // ASCII '&'
    {0x00, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '''
    {0x00, 0x00, 0x06, 0x0C, 0x0C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0C, 0x0C, 0x06, 0x00, 0x00}, // ASCII '('
    {0x00, 0x00, 0x30, 0x18, 0x18, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x18, 0x18, 0x30, 0x00, 0x00}, // ASCII ')'
    {0x00, 0x00, 0x00, 0x00, 0x08, 0x2A, 0x1C, 0x7F, 0x1C, 0x2A, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '*'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '+'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x08, 0x10, 0x00, 0x00}, // ASCII ','
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '-'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00}, // ASCII '.'
    {0x00, 0x00, 0x06, 0x06, 0x0C, 0x0C, 0x18, 0x18, 0x30, 0x30, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00}, // ASCII '/'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x6B, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII '0'
    {0x00, 0x00, 0x00, 0x0C, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x00, 0x00, 0x00}, // ASCII '1'
    {0x00, 0x00, 0x00, 0x3C, 0x66, 0x66, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x60, 0x7E, 0x00, 0x00, 0x00}, // ASCII '2'
    {0x00, 0x00, 0x00, 0x3C, 0x66, 0x06, 0x06, 0x1C, 0x06, 0x06, 0x46, 0x66, 0x3C, 0x00, 0x00, 0x00}, // ASCII '3'
    {0x00, 0x00, 0x00, 0x0E, 0x1E, 0x16, 0x36, 0x26, 0x66, 0x46, 0x7F, 0x06, 0x06, 0x00, 0x00, 0x00}, // ASCII '4'
    {0x00, 0x00, 0x00, 0x7E, 0x60, 0x60, 0x7C, 0x66, 0x06, 0x06, 0x46, 0x66, 0x3C, 0x00, 0x00, 0x00}, // ASCII '5'
    {0x00, 0x00, 0x00, 0x1C, 0x30, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00}, // ASCII '6'
    {0x00, 0x00, 0x00, 0x7E, 0x06, 0x06, 0x0C, 0x0C, 0x0C, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00}, // ASCII '7'
    {0x00, 0x00, 0x00, 0x3C, 0x66, 0x66, 0x24, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00}, // ASCII '8'
    {0x00, 0x00, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x3E, 0x06, 0x06, 0x0C, 0x38, 0x00, 0x00, 0x00}, // ASCII '9'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00}, // ASCII ':'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x08, 0x10, 0x00, 0x00}, // ASCII ';'
    {0x00, 0x00, 0x00, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x00, 0x00, 0x00, 0x00}, // ASCII '<'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '='
    {0x00, 0x00, 0x00, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x06, 0x0C, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00}, // ASCII '>'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x03, 0x06, 0x0C, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00}, // ASCII '?'
    {0x00, 0x00, 0x00, 0x1E, 0x33, 0x63, 0x6F, 0x6D, 0x6B, 0x6B, 0x6F, 0x60, 0x33, 0x1E, 0x00, 0x00}, // ASCII '@'
    {0x00, 0x00, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'A'
    {0x00, 0x00, 0x00, 0x7E, 0x63, 0x63, 0x63, 0x7E, 0x63, 0x63, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00}, // ASCII 'B'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x60, 0x60, 0x60, 0x60, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'C'
    {0x00, 0x00, 0x00, 0x7C, 0x66, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x66, 0x7C, 0x00, 0x00, 0x00}, // ASCII 'D'
    {0x00, 0x00, 0x00, 0x7F, 0x60, 0x60, 0x60, 0x7E, 0x60, 0x60, 0x60, 0x60, 0x7F, 0x00, 0x00, 0x00}, // ASCII 'E'
    {0x00, 0x00, 0x00, 0x7F, 0x60, 0x60, 0x60, 0x7E, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00}, // ASCII 'F'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x60, 0x60, 0x67, 0x63, 0x63, 0x67, 0x3B, 0x00, 0x00, 0x00}, // ASCII 'G'
    {0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'H'
    {0x00, 0x00, 0x00, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00, 0x00, 0x00}, // ASCII 'I'
    {0x00, 0x00, 0x00, 0x1F, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00}, // ASCII 'J'
    {0x00, 0x00, 0x00, 0x63, 0x63, 0x66, 0x6C, 0x78, 0x78, 0x6C, 0x66, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'K'
    {0x00, 0x00, 0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x7F, 0x00, 0x00, 0x00}, // ASCII 'L'
    {0x00, 0x00, 0x00, 0x41, 0x63, 0x77, 0x7F, 0x6B, 0x6B, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'M'
    {0x00, 0x00, 0x00, 0x43, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'N'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'O'
    {0x00, 0x00, 0x00, 0x7E, 0x63, 0x63, 0x63, 0x63, 0x7E, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00}, // ASCII 'P'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x0C, 0x07, 0x00}, // ASCII 'Q'
    {0x00, 0x00, 0x00, 0x7E, 0x63, 0x63, 0x63, 0x63, 0x7E, 0x6C, 0x66, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'R'
    {0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x70, 0x38, 0x0E, 0x07, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'S'
    {0x00, 0x00, 0x00, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00}, // ASCII 'T'
    {0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'U'
    {0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x36, 0x36, 0x1C, 0x1C, 0x00, 0x00, 0x00}, // ASCII 'V'
    {0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x6B, 0x6B, 0x6B, 0x36, 0x36, 0x00, 0x00, 0x00}, // ASCII 'W'
    {0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x1C, 0x36, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'X'
    {0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00}, // ASCII 'Y'
    {0x00, 0x00, 0x00, 0x7F, 0x06, 0x06, 0x0C, 0x0C, 0x18, 0x18, 0x30, 0x30, 0x7F, 0x00, 0x00, 0x00}, // ASCII 'Z'
    {0x00, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1E, 0x00, 0x00}, // ASCII '['
    {0x00, 0x00, 0x00, 0x60, 0x60, 0x30, 0x30, 0x18, 0x18, 0x0C, 0x0C, 0x06, 0x06, 0x00, 0x00, 0x00}, // ASCII '\\'
    {0x00, 0x00, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00, 0x00}, // ASCII ']'
    {0x00, 0x00, 0x08, 0x1C, 0x36, 0x63, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '^'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00}, // ASCII '_'
    {0x00, 0x00, 0x30, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '`'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x03, 0x03, 0x3F, 0x63, 0x63, 0x3F, 0x00, 0x00, 0x00}, // ASCII 'a'
    {0x00, 0x00, 0x00, 0x60, 0x60, 0x60, 0x6E, 0x73, 0x63, 0x63, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00}, // ASCII 'b'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x60, 0x60, 0x60, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'c'
    {0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x3B, 0x67, 0x63, 0x63, 0x63, 0x63, 0x3F, 0x00, 0x00, 0x00}, // ASCII 'd'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x7F, 0x60, 0x60, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'e'
    {0x00, 0x00, 0x00, 0x0F, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00}, // ASCII 'f'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x63, 0x63, 0x63, 0x67, 0x3B, 0x03, 0x03, 0x3E, 0x00}, // ASCII 'g'
    {0x00, 0x00, 0x00, 0x60, 0x60, 0x60, 0x6E, 0x73, 0x63, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'h'
    {0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3F, 0x00, 0x00, 0x00}, // ASCII 'i'
    {0x00, 0x00, 0x0C, 0x0C, 0x00, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x78, 0x00}, // ASCII 'j'
    {0x00, 0x00, 0x00, 0x60, 0x60, 0x60, 0x66, 0x6C, 0x78, 0x78, 0x6C, 0x66, 0x63, 0x00, 0x00, 0x00}, // ASCII 'k'
    {0x00, 0x00, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0E, 0x00, 0x00, 0x00}, // ASCII 'l'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x7F, 0x6B, 0x6B, 0x6B, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'm'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6E, 0x73, 0x63, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'n'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 'o'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6E, 0x73, 0x63, 0x63, 0x63, 0x7E, 0x60, 0x60, 0x60, 0x00}, // ASCII 'p'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x63, 0x63, 0x63, 0x67, 0x3B, 0x03, 0x03, 0x03, 0x00}, // ASCII 'q'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36, 0x3B, 0x30, 0x30, 0x30, 0x30, 0x30, 0x00, 0x00, 0x00}, // ASCII 'r'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x60, 0x3E, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00}, // ASCII 's'
    {0x00, 0x00, 0x00, 0x08, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0E, 0x00, 0x00, 0x00}, // ASCII 't'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x67, 0x3B, 0x00, 0x00, 0x00}, // ASCII 'u'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x36, 0x36, 0x1C, 0x1C, 0x00, 0x00, 0x00}, // ASCII 'v'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x6B, 0x6B, 0x6B, 0x3E, 0x36, 0x00, 0x00, 0x00}, // ASCII 'w'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x36, 0x1C, 0x36, 0x63, 0x63, 0x00, 0x00, 0x00}, // ASCII 'x'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x67, 0x3B, 0x03, 0x03, 0x3E, 0x00}, // ASCII 'y'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x7F, 0x00, 0x00, 0x00}, // ASCII 'z'
    {0x00, 0x00, 0x0E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x70, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0E, 0x00}, // ASCII '{'
    {0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00}, // ASCII '|'
    {0x00, 0x00, 0x38, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x07, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x38, 0x00}, // ASCII '}'
    {0x00, 0x00, 0x31, 0x7F, 0x46, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ASCII '~'
};


void drawChar(unsigned char c, int x, int y, int fgcolor, int bgcolor, int scale) {
    int cx, cy, dx, dy;
    unsigned char *glyph = font_bitmap[c - 32];

    // Loop through each row of the glyph (16 rows)
    for (cy = 0; cy < CHAR_HEIGHT; cy++) {
        // Loop through each column of the glyph (8 columns)
        for (cx = 0; cx < CHAR_WIDTH; cx++) {
            // Check if the pixel at (cx, cy) in the glyph is part of the character
            if (glyph[cy] & (1 << (7 - cx))) {
                // Draw the scaled pixel
                for (dy = 0; dy < scale; dy++) {
                    for (dx = 0; dx < scale; dx++) {
                        putPixel(fgcolor, x + cx * scale + dx, y + (cy * scale) + dy); // Corrected vertical position
                    }
                }
            } else {
                // Draw the background for the scaled pixel
                for (dy = 0; dy < scale; dy++) {
                    for (dx = 0; dx < scale; dx++) {
                        putPixel(bgcolor, x + cx * scale + dx, y + (cy * scale) + dy); // Corrected vertical position
                    }
                }
            }
        }
    }
}
